(()=>{console.log("supmmmmmmmm"),window.onload=()=>{null===localStorage.getItem("hasCodeRunBefore")&&(folderarray=[],todoarray=[],l(todoarray,folderarray),localStorage.setItem("hasCodeRunBefore",!0))},function(){try{todoarray=JSON.parse(localStorage.getItem("todoarray")),folderarray=JSON.parse(localStorage.getItem("folderarray"))}catch{return!0}}(),folderarray.forEach((e=>{foldername=e,folderitem=document.createElement("li"),folderitem.classList.add("list-group-item"),folderitem.innerText=foldername,folderlist.appendChild(folderitem),folderitem.addEventListener("click",t)}));let e="";function t(e){oldselected=document.querySelector(".selectedfolder"),null!=oldselected&&oldselected.classList.remove("selectedfolder"),e.target.classList.add("selectedfolder"),d=document.querySelector("#deletefolderbutton"),d.classList.remove("hidden"),dt=document.querySelector("#deletetodobutton"),dt.classList.add("hidden"),r()}function o(e){oldselected=document.querySelector(".selectedtodo"),null!=oldselected&&oldselected.classList.remove("selectedtodo"),e.target.classList.add("selectedtodo"),d=document.querySelector("#deletetodobutton"),d.classList.remove("hidden")}function r(){todolist=document.querySelector("#todolistgroup"),todolist.innerHTML="",selectedvalue=document.querySelector(".selectedfolder").textContent,console.log(selectedvalue),todoarray.forEach((e=>{e.folder===selectedvalue&&(listitem=document.createElement("li"),listitem.classList.add("list-group-item"),listitem.addEventListener("click",o),listitem.innerText=e.description+" "+e.priority+" "+e.date,todolist.appendChild(listitem))}))}function l(e,t){localStorage.setItem("todoarray",JSON.stringify(e)),localStorage.setItem("folderarray",JSON.stringify(t))}document.querySelector("#createfolderbutton").addEventListener("click",(function(){foldername=document.querySelector("#foldernameinput").value,console.log(foldername),console.log(folderarray),!0===folderarray.includes(foldername)?alert("Folder with that name already exists"):null!=foldername?(folderarray.push(foldername),foldername=document.querySelector("#foldernameinput").value,folderitem=document.createElement("li"),folderitem.classList.add("list-group-item",foldername),folderitem.innerText=foldername,folderlist.appendChild(folderitem),folderitem.addEventListener("click",t),document.querySelector("#foldernameinput").value="",l(todoarray,folderarray)):alert("Must be at least one character")})),document.querySelector("#deletefolderbutton").addEventListener("click",(function(e){d=document.querySelector("#deletefolderbutton"),selected=document.querySelector(".selectedfolder"),console.log(folderarray),console.log(selected.innerText),folderarray.forEach(((e,t)=>{e===selected.innerText&&folderarray.splice(t,1)})),tododomlist=document.querySelector("#todolistgroup"),tododomlist.innerHTML="",todoarray=todoarray.filter((e=>e.folder!=selected.innerText)),folderlist=document.querySelector("#folderlistgroup"),selected.remove(),d.classList.add("hidden"),todolist=document.querySelector("#todolistgroup"),todolist.innerHTML="",l()})),document.querySelector("#createtodobutton").addEventListener("click",(function(){if(e=document.querySelector(".selectedfolder"),null!=e){if(a=new function(){this.description=document.querySelector("#tododescription").value,this.priorityvalue=document.querySelector("#priorityselect").value,this.priority=document.querySelector("#priorityselect").options[this.priorityvalue].text,this.date=document.querySelector("#dateselect").value,this.folder=document.querySelector(".selectedfolder").textContent,console.log()},0!=todoarray.length&&""!=a.date)for(let e=0;e<todoarray.length;e++){if(a.folder===todoarray[e].folder&&a.description===todoarray[e].description){alert("Todo already posted!");break}if(e===todoarray.length-1){todoarray.push(a),l(todoarray,folderarray);break}}else""!=a.date&&(todoarray.push(a),l(todoarray,folderarray));console.log(todoarray)}else alert("pleaseselectfolder");r()})),document.querySelector("#deletetodobutton").addEventListener("click",(function(){selectedtodo=document.querySelector(".selectedtodo"),folderarray.forEach(((e,t)=>{e===selectedtodo.innerText&&folderarray.splice(t,1)})),selectedtodo.remove(),d=document.querySelector("#deletetodobutton"),d.classList.add("hidden")}))})();